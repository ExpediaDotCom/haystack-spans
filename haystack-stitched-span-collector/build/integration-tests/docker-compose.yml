version: '3'
services:
   zookeeper:
     image: wurstmeister/zookeeper
     ports:
       - "2181:2181"
   kafkasvc:
     image: wurstmeister/kafka:0.10.2.1
     ports:
       - "9092:9092"
     depends_on:
       - zookeeper
     links:
       - zookeeper:zk
     environment:
        KAFKA_ADVERTISED_HOST_NAME: kafkasvc
        KAFKA_ADVERTISED_PORT: 9092
        KAFKA_ZOOKEEPER_CONNECT: zk:2181
     volumes:
       - /var/run/docker.sock:/var/run/docker.sock
   elasticsearch:
     image: elasticsearch:2.4.6-alpine
     environment:
       ES_JAVA_OPTS: "-Xms256m -Xmx256m"
     ports:
       - "9200:9200"
   cassandra:
     image: cassandra:3.11.0
     environment:
       MAX_HEAP_SIZE: 256m
       HEAP_NEWSIZE: 256m
     ports:
       - "9042:9042"
